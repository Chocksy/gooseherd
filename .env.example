# App branding (customizes dashboard title, commit prefix, branch prefix, etc.)
APP_NAME=Gooseherd

# Slack (required)
SLACK_BOT_TOKEN=xoxb-...
SLACK_APP_TOKEN=xapp-...
SLACK_SIGNING_SECRET=...
# Display name used in help/status hints (defaults to lowercase APP_NAME)
SLACK_COMMAND_NAME=gooseherd

# GitHub
GITHUB_TOKEN=ghp_...
GITHUB_DEFAULT_OWNER=hubstaff

# Goose + OpenRouter (optional, only needed when AGENT_COMMAND_TEMPLATE uses goose)
OPENROUTER_API_KEY=
GOOSE_PROVIDER=openrouter
GOOSE_MODEL=

# Comma-separated allowlist. Example: hubstaff/hubstaff-server,hubstaff/another-repo
REPO_ALLOWLIST=

# Runtime
RUNNER_CONCURRENCY=1
WORK_ROOT=.work
DATA_DIR=data
DRY_RUN=true

# Optional branch controls (defaults to lowercase APP_NAME)
BRANCH_PREFIX=gooseherd
DEFAULT_BASE_BRANCH=main

# Git identity for commits (defaults to "${APP_NAME} Bot")
GIT_AUTHOR_NAME=Gooseherd Bot
GIT_AUTHOR_EMAIL=gooseherd-bot@local

# Command templates
# Placeholders: {{repo_dir}} {{prompt_file}} {{run_id}} {{repo_slug}} {{task_file}} {{parent_run_id}}
AGENT_COMMAND_TEMPLATE=bash scripts/dummy-agent.sh {{repo_dir}} {{prompt_file}} {{run_id}}
# Goose example (fresh runs use named sessions, follow-ups fork from parent):
# AGENT_COMMAND_TEMPLATE=cd {{repo_dir}} && goose run -n gooseherd-{{run_id}} --no-profile --with-builtin developer,todo --debug --max-turns 60 --max-tool-repetitions 6 --provider openrouter --model $GOOSE_MODEL -i {{prompt_file}}
# Goose follow-up template (uses {{parent_run_id}} to fork session history):
# AGENT_FOLLOW_UP_TEMPLATE=cd {{repo_dir}} && goose run -n gooseherd-{{run_id}} --fork gooseherd-{{parent_run_id}} --no-profile --with-builtin developer,todo --debug --max-turns 60 --max-tool-repetitions 6 --provider openrouter --model $GOOSE_MODEL -i {{prompt_file}}

# Optional. Leave empty to skip validation.
# Placeholders: {{repo_dir}} {{run_id}} {{repo_slug}}
VALIDATION_COMMAND=

# Optional lint auto-fix (runs before validation, "free" round — no agent re-run needed)
# Example: cd {{repo_dir}} && npm run lint:fix
LINT_FIX_COMMAND=

# How many times to re-run the agent to fix validation errors (0 = fail immediately)
MAX_VALIDATION_ROUNDS=2

# Max time for AGENT_COMMAND_TEMPLATE in seconds
AGENT_TIMEOUT_SECONDS=1200

# Slack run-card heartbeat cadence (seconds)
SLACK_PROGRESS_HEARTBEAT_SECONDS=20

# Dashboard
DASHBOARD_ENABLED=true
# Use 127.0.0.1 for local dev, 0.0.0.0 for Docker/Coolify (set in Dockerfile ENV)
DASHBOARD_HOST=127.0.0.1
DASHBOARD_PORT=8787

# Optional channel allowlist for Slack (comma-separated channel IDs)
SLACK_ALLOWED_CHANNELS=

# Guards
MAX_TASK_CHARS=4000

# CEMS Memory Integration (optional, disabled by default)
CEMS_ENABLED=false
CEMS_API_URL=http://localhost:8100
CEMS_API_KEY=

# CEMS MCP Extension for Goose agents (optional, provides live memory tools during agent runs)
# Install CEMS first: CEMS_TOOL=goose curl -sSf https://raw.githubusercontent.com/chocksy/cems/main/remote-install.sh | bash
# Then set the command (env vars are passed through to the stdio server):
# CEMS_MCP_COMMAND=CEMS_API_URL=$CEMS_API_URL CEMS_API_KEY=$CEMS_API_KEY cems-mcp
# In Docker: leave empty — Gooseherd's HTTP-based CemsProvider handles memory integration.
CEMS_MCP_COMMAND=
